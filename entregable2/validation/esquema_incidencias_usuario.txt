db.createCollection("incidencias_usuario", {
    validator: {
        $jsonSchema: {
            bsonType: "object",
            title: "Incidencias Usuario Validator",
            required: [
                "ID",
                "TIPO_INCIDENCIA",
                "FECHA_REPORTE",
                "ESTADO",
                "UsuarioID",
                "MantenimientoID",
            ],
            properties: {
                ID: {
                    bsonType: "int",
                    description: "número identificativo de la columna",
                },
                TIPO_INCIDENCIA: {
                    bsonType: "string",
                    enum: ["DESGASTE", "ROTURA", "VANDALISMO", "MAL FUNCIONAMIENTO"],
                    description: "tipo de incidencia reportada",
                },
                FECHA_REPORTE: {
                    bsonType: "string",
                    description: "fecha en la que se reportó la incidencia",
                },
                ESTADO: {
                    bsonType: "string",
                    enum: ["CERRADA", "ABIERTA"],
                    description: "estado actual de la incidencia",
                },
                UsuarioID: {
                    bsonType: "array",
                    description: "listado de usuarios",
                    minItems: 1,
                    uniqueItems: true,
                    items: {
                        bsonType: "object",
                        description: "información de usuarios",
                        required: ["NIF", "NOMBRE", "EMAIL", "TELEFONO"],
                        properties: {
                            NIF: {
                                bsonType: "string",
                                description: "número de identificación del usuario",
                            },
                            NOMBRE: {
                                bsonType: "string",
                                description: "nombre del usuario",
                            },
                            EMAIL: {
                                bsonType: "string",
                                description: "email del usuario",
                            },
                            TELEFONO: {
                                bsonType: "string",
                                description: "telefono del usuario",
                            },
                        },
                    },
                },
                MantenimientoID: {
                    bsonType: ["string"],
                    description: "id de mantenimiento",
                }
            },
        },
    },
});
